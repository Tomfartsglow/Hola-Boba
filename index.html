<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Hola Boba Menu</title>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700&display=swap" rel="stylesheet" />
  <script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    html, body {
      font-family: 'Montserrat', sans-serif;
      height: 100%;
      background-color: #F5F5F5;
      color: #333;
      overflow-x: hidden;
    }

    body {
      position: relative;
    }

    /* Detection Banner */
    .detection-banner {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      background: linear-gradient(45deg, #F8C300, #00B0B9);
      color: white;
      padding: 10px;
      text-align: center;
      font-weight: bold;
      z-index: 1000;
      transform: translateY(-100%);
      transition: transform 0.3s ease;
    }

    .detection-banner.show {
      transform: translateY(0);
    }

    /* Order Options Modal */
    .order-modal {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.7);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 2000;
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s ease;
    }

    .order-modal.show {
      opacity: 1;
      visibility: visible;
    }

    .order-modal-content {
      background: white;
      border-radius: 20px;
      padding: 2rem;
      max-width: 400px;
      width: 90%;
      text-align: center;
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
      transform: scale(0.8);
      transition: transform 0.3s ease;
    }

    .order-modal.show .order-modal-content {
      transform: scale(1);
    }

    .order-modal h3 {
      color: #00B0B9;
      margin-bottom: 1rem;
      font-size: 1.5rem;
    }

    .order-modal p {
      color: #666;
      margin-bottom: 2rem;
    }

    .order-options {
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }

    .order-option {
      background: linear-gradient(45deg, #F8C300, #e6b800);
      color: #000;
      padding: 1rem;
      border-radius: 12px;
      text-decoration: none;
      font-weight: bold;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
      transition: all 0.3s ease;
      border: none;
      cursor: pointer;
      font-size: 1rem;
    }

    .order-option:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(248, 195, 0, 0.4);
    }

    .order-option.delivery {
      background: linear-gradient(45deg, #00B0B9, #008a91);
      color: white;
    }

    .order-option.delivery:hover {
      box-shadow: 0 5px 15px rgba(0, 176, 185, 0.4);
    }

    .close-modal {
      position: absolute;
      top: 10px;
      right: 15px;
      background: none;
      border: none;
      font-size: 24px;
      color: #999;
      cursor: pointer;
      transition: color 0.3s ease;
    }

    .close-modal:hover {
      color: #333;
    }

    .main-content {
      margin-top: 0;
      transition: margin-top 0.3s ease;
    }

    .main-content.with-banner {
      margin-top: 60px;
    }

    .slideshow {
      position: relative;
      height: 250px;
      overflow: hidden;
      margin-top: 2rem;
      border-radius: 20px;
    }

    .slideshow-container {
      display: flex;
      transition: transform 0.5s ease;
      height: 100%;
    }

    .slide {
      min-width: 100%;
      height: 100%;
      position: relative;
    }

    .slide img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .pagination-dots {
      position: absolute;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      gap: 8px;
    }

    .dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background-color: rgba(255, 255, 255, 0.5);
      cursor: pointer;
      transition: background-color 0.3s;
    }

    .dot.active {
      background-color: white;
    }

    .nav-button {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      background: rgba(255, 255, 255, 0.3);
      border: none;
      border-radius: 50%;
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      color: white;
      font-size: 20px;
      backdrop-filter: blur(5px);
      transition: background-color 0.3s;
    }

    .nav-button:hover {
      background: rgba(255, 255, 255, 0.5);
    }

    .prev-button {
      left: 10px;
    }

    .next-button {
      right: 10px;
    }

    .menu {
      background-color: #FFFFFF;
      padding: 2rem;
      border-radius: 20px;
      max-width: 800px;
      margin: 3rem auto;
      box-shadow: 0 8px 20px rgba(0,0,0,0.15);
      backdrop-filter: blur(6px);
      color: #333;
      animation: fadeInUp 1.2s ease-out;
    }

    @keyframes fadeInUp {
      from {
        transform: translateY(30px);
        opacity: 0;
      }
      to {
        transform: translateY(0);
        opacity: 1;
      }
    }

    .logo-container {
      text-align: center;
      margin-bottom: 2rem;
    }

    .logo-container img {
      max-width: 150px;
      opacity: 0.85;
    }

    h1 {
      color: #F8C300;
      margin-bottom: 2rem;
      font-weight: 700;
      font-size: 2.5rem;
      text-align: center;
    }

    /* Screen System */
    .screen {
      display: none;
    }

    .screen.active {
      display: block;
    }

    /* Main Category Selection */
    .category-buttons {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 1.5rem;
      margin-bottom: 2rem;
    }

    .category-btn {
      background: linear-gradient(145deg, #F8C300, #e6b800);
      color: #000;
      border: none;
      padding: 2rem 1rem;
      border-radius: 20px;
      font-size: 1.2rem;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 8px 15px rgba(248, 195, 0, 0.3);
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 0.5rem;
    }

    .category-btn:hover {
      transform: translateY(-5px);
      box-shadow: 0 15px 25px rgba(248, 195, 0, 0.4);
    }

    .category-btn i {
      font-size: 2rem;
      margin-bottom: 0.5rem;
    }

    .category-btn.boba {
      background: linear-gradient(145deg, #00B0B9, #008a91);
      color: white;
      box-shadow: 0 8px 15px rgba(0, 176, 185, 0.3);
    }

    .category-btn.boba:hover {
      box-shadow: 0 15px 25px rgba(0, 176, 185, 0.4);
    }

    .category-btn.others {
      background: linear-gradient(145deg, #8e44ad, #732d91);
      color: white;
      box-shadow: 0 8px 15px rgba(142, 68, 173, 0.3);
    }

    .category-btn.others:hover {
      box-shadow: 0 15px 25px rgba(142, 68, 173, 0.4);
    }

    /* Back Button */
    .back-btn {
      background: linear-gradient(145deg, #6c757d, #5a6268);
      color: white;
      border: none;
      padding: 0.8rem 1.5rem;
      border-radius: 12px;
      font-weight: bold;
      cursor: pointer;
      margin-bottom: 2rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
      transition: all 0.3s ease;
    }

    .back-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(108, 117, 125, 0.4);
    }

    /* Screen Titles */
    .screen-title {
      color: #00B0B9;
      font-size: 2rem;
      margin-bottom: 2rem;
      text-align: center;
    }

    /* Ice Cream Flavors */
    .flavor-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 1rem;
      margin-bottom: 2rem;
    }

    .flavor-option {
      background: white;
      border: 3px solid #e9ecef;
      padding: 1.5rem;
      border-radius: 15px;
      text-align: center;
      cursor: pointer;
      transition: all 0.3s ease;
      font-weight: 600;
      font-size: 1.1rem;
    }

    .flavor-option:hover {
      border-color: #F8C300;
      background: #fff8e1;
      transform: translateY(-3px);
      box-shadow: 0 5px 15px rgba(248, 195, 0, 0.3);
    }

    .flavor-option.selected {
      background: linear-gradient(145deg, #F8C300, #e6b800);
      border-color: #F8C300;
      color: #000;
      font-weight: bold;
      transform: translateY(-3px);
      box-shadow: 0 8px 20px rgba(248, 195, 0, 0.4);
    }

    /* Boba Categories */
    .boba-categories {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 1.5rem;
      margin-bottom: 2rem;
    }

    .boba-category {
      background: linear-gradient(145deg, #00B0B9, #008a91);
      color: white;
      border: none;
      padding: 1.5rem;
      border-radius: 15px;
      font-size: 1.1rem;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 5px 15px rgba(0, 176, 185, 0.3);
    }

    .boba-category:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 20px rgba(0, 176, 185, 0.4);
    }

    .boba-category h3 {
      margin-bottom: 0.5rem;
      font-size: 1.2rem;
    }

    .boba-category p {
      font-size: 0.9rem;
      opacity: 0.9;
    }

    /* Boba Flavor Selection */
    .boba-flavor-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
      gap: 1rem;
      margin-bottom: 2rem;
    }

    .boba-flavor {
      background: white;
      border: 2px solid #e9ecef;
      padding: 1rem;
      border-radius: 12px;
      text-align: center;
      cursor: pointer;
      transition: all 0.3s ease;
      font-weight: 500;
      position: relative;
    }

    .boba-flavor:hover {
      border-color: #00B0B9;
      background: #e8f5f5;
      transform: translateY(-2px);
    }

    .boba-flavor.selected {
      background: linear-gradient(145deg, #00B0B9, #008a91);
      border-color: #00B0B9;
      color: white;
      font-weight: bold;
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(0, 176, 185, 0.3);
    }

    /* Extras Grid */
    .extras-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 1rem;
      margin-bottom: 2rem;
    }

    .extra-option {
      background: white;
      border: 2px solid #e9ecef;
      padding: 1rem;
      border-radius: 12px;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      gap: 0.8rem;
    }

    .extra-option:hover {
      border-color: #F8C300;
      background: #fff8e1;
      transform: translateY(-2px);
    }

    .extra-option.selected {
      background: linear-gradient(145deg, #28a745, #218838);
      border-color: #28a745;
      color: white;
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(40, 167, 69, 0.3);
    }

    .extra-option.none {
      border-color: #6c757d;
    }

    .extra-option.none:hover {
      border-color: #495057;
      background: #f8f9fa;
    }

    .extra-option.none.selected {
      background: linear-gradient(145deg, #6c757d, #5a6268);
      border-color: #6c757d;
    }

    .extra-option i {
      font-size: 1.2rem;
      min-width: 20px;
    }

    .extra-info {
      flex-grow: 1;
    }

    .extra-name {
      font-weight: bold;
      margin-bottom: 0.2rem;
    }

    .extra-price {
      font-size: 0.9rem;
      color: #F8C300;
      font-weight: bold;
    }

    .extra-option.selected .extra-price {
      color: #F8C300;
    }

    /* Next Button */
    .next-btn {
      background: linear-gradient(145deg, #28a745, #218838);
      color: white;
      border: none;
      padding: 1rem 2rem;
      border-radius: 12px;
      font-weight: bold;
      font-size: 1.1rem;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      gap: 0.5rem;
      margin: 2rem auto 0;
    }

    .next-btn:hover:not(:disabled) {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(40, 167, 69, 0.4);
    }

    .next-btn:disabled {
      background: #6c757d;
      cursor: not-allowed;
      opacity: 0.6;
    }

    /* Order Summary */
    .order-summary {
      position: fixed;
      top: 20px;
      right: 20px;
      background: white;
      padding: 1rem;
      border-radius: 12px;
      box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);
      transform: translateX(100%);
      transition: transform 0.3s ease;
      z-index: 1000;
      max-width: 300px;
      width: auto;
    }

    .order-summary.show {
      transform: translateX(0);
    }

    .order-summary-content {
      display: flex;
      flex-direction: column;
      gap: 0.8rem;
    }

    .order-details {
      flex-grow: 1;
    }

    .order-item {
      font-weight: bold;
      color: #333;
      margin-bottom: 0.3rem;
      font-size: 0.95rem;
    }

    .order-flavor {
      color: #666;
      font-size: 0.85rem;
      margin-bottom: 0.3rem;
    }

    .order-extras {
      color: #28a745;
      font-size: 0.8rem;
      margin-bottom: 0.5rem;
    }

    .order-price {
      color: #F8C300;
      font-weight: bold;
      font-size: 1.1rem;
      text-align: center;
      margin-bottom: 0.5rem;
    }

    .order-actions {
      display: flex;
      gap: 0.5rem;
      justify-content: center;
    }

    .clear-btn {
      background: #dc3545;
      color: white;
      border: none;
      padding: 0.5rem 0.8rem;
      border-radius: 6px;
      cursor: pointer;
      font-weight: bold;
      transition: background 0.3s ease;
      font-size: 0.85rem;
    }

    .clear-btn:hover {
      background: #c82333;
    }

    .order-btn {
      background: linear-gradient(145deg, #28a745, #218838);
      color: white;
      border: none;
      padding: 0.5rem 1rem;
      border-radius: 6px;
      cursor: pointer;
      font-weight: bold;
      transition: all 0.3s ease;
      font-size: 0.85rem;
    }

    .order-btn:hover {
      transform: translateY(-1px);
      box-shadow: 0 3px 10px rgba(40, 167, 69, 0.3);
    }

    @media (max-width: 600px) {
      .menu {
        padding: 1rem;
        margin: 1.5rem;
      }
      
      .category-buttons {
        grid-template-columns: 1fr;
        gap: 1rem;
      }
      
      .category-btn {
        padding: 1.5rem 1rem;
        font-size: 1.1rem;
      }
      
      .order-summary-content {
        flex-direction: column;
        text-align: center;
      }
      
      .order-actions {
        width: 100%;
        justify-content: center;
      }
    }
  </style>
</head>
<body>
  <div class="detection-banner" id="detectionBanner">
    <span id="detectionText">🔍 Detecting access method...</span>
  </div>

  <!-- Order Options Modal -->
  <div class="order-modal" id="orderModal">
    <div class="order-modal-content">
      <button class="close-modal" id="closeModal">&times;</button>
      <h3>🛍️ How would you like to order?</h3>
      <p>Choose your preferred option to get your Hola Boba favorites!</p>
      <div class="order-options">
        <button class="order-option pickup" id="pickupOption">
          <i class="fas fa-store"></i>
          Order for Pickup
        </button>
        <button class="order-option delivery" id="deliveryOption">
          <i class="fas fa-motorcycle"></i>
          Order for Delivery
        </button>
      </div>
    </div>
  </div>

  <div class="main-content" id="mainContent">
    <div class="menu">
      <div class="logo-container">
        <img src="logo.jpeg" alt="Hola Boba Logo" />
      </div>
      <h1>Hola Boba Menu</h1>

      <!-- Main Categories Screen -->
      <div class="screen active" id="mainScreen">
        <div class="category-buttons">
          <button class="category-btn icecream" data-category="icecream">
            <i class="fas fa-ice-cream"></i>
            <span>Ice Cream</span>
            <small>Vanilla, Chocolate, Mix</small>
          </button>
          <button class="category-btn boba" data-category="boba">
            <i class="fas fa-glass-water"></i>
            <span>Boba & Drinks</span>
            <small>Boba & Smoothies</small>
          </button>
          <button class="category-btn others" data-category="others">
            <i class="fas fa-ellipsis-h"></i>
            <span>Others</span>
            <small>Coffee & Waffles</small>
          </button>
        </div>

        <!-- Gallery under main categories -->
        <div class="slideshow">
          <div class="slideshow-container">
            <div class="slide">
              <img src="Screenshot_20250524_210435_Instagram[1].jpg" alt="Hola Boba 1">
            </div>
            <div class="slide">
              <img src="Screenshot_20250524_210511_Instagram[1].jpg" alt="Hola Boba 2">
            </div>
            <div class="slide">
              <img src="Screenshot_20250524_210523_Instagram[1].jpg" alt="Hola Boba 3">
            </div>
            <div class="slide">
              <img src="Screenshot_20250524_210618_Instagram[1].jpg" alt="Hola Boba 4">
            </div>
          </div>
          <div class="pagination-dots"></div>
          <button class="nav-button prev-button">
            <i class="fas fa-chevron-left"></i>
          </button>
          <button class="nav-button next-button">
            <i class="fas fa-chevron-right"></i>
          </button>
        </div>
      </div>

      <!-- Ice Cream Flavors Screen -->
      <div class="screen" id="icecreamScreen">
        <button class="back-btn" onclick="menuSystem.goToScreen('main')">
          <i class="fas fa-arrow-left"></i>
          Back to Menu
        </button>
        <h2 class="screen-title">🍦 Choose Your Ice Cream Flavor</h2>
        
        <div class="flavor-grid">
          <div class="flavor-option" data-flavor="vanilla">
            <i class="fas fa-ice-cream" style="font-size: 2rem; margin-bottom: 0.5rem; color: #F8C300;"></i>
            <div>Vanilla</div>
          </div>
          <div class="flavor-option" data-flavor="chocolate">
            <i class="fas fa-ice-cream" style="font-size: 2rem; margin-bottom: 0.5rem; color: #8B4513;"></i>
            <div>Chocolate</div>
          </div>
          <div class="flavor-option" data-flavor="mix">
            <i class="fas fa-ice-cream" style="font-size: 2rem; margin-bottom: 0.5rem; color: #FF69B4;"></i>
            <div>Mix</div>
          </div>
        </div>

        <button class="next-btn" id="icecreamNextBtn" disabled onclick="menuSystem.goToScreen('icecreamExtras')">
          Next: Add Extras
          <i class="fas fa-arrow-right"></i>
        </button>
      </div>

      <!-- Ice Cream Extras Screen -->
      <div class="screen" id="icecreamExtrasScreen">
        <button class="back-btn" onclick="menuSystem.goToScreen('icecream')">
          <i class="fas fa-arrow-left"></i>
          Back to Flavors
        </button>
        <h2 class="screen-title">✨ Add Ice Cream Extras</h2>
        
        <div class="extras-grid">
          <div class="extra-option none" data-extra="none" data-price="0">
            <i class="fas fa-times"></i>
            <div class="extra-info">
              <div class="extra-name">None</div>
              <div style="font-size: 0.85rem; color: #666;">No extras</div>
            </div>
          </div>
          <div class="extra-option" data-extra="chocolate-chips" data-price="300">
            <i class="fas fa-cookie-bite"></i>
            <div class="extra-info">
              <div class="extra-name">Chocolate Chips</div>
              <div class="extra-price">+₡300</div>
            </div>
          </div>
          <div class="extra-option" data-extra="nutella" data-price="500">
            <i class="fas fa-heart"></i>
            <div class="extra-info">
              <div class="extra-name">Nutella</div>
              <div class="extra-price">+₡500</div>
            </div>
          </div>
          <div class="extra-option" data-extra="sprinkles" data-price="200">
            <i class="fas fa-star"></i>
            <div class="extra-info">
              <div class="extra-name">Sprinkles</div>
              <div class="extra-price">+₡200</div>
            </div>
          </div>
        </div>
      </div>

      <!-- Boba Categories Screen -->
      <div class="screen" id="bobaScreen">
        <button class="back-btn" onclick="menuSystem.goToScreen('main')">
          <i class="fas fa-arrow-left"></i>
          Back to Menu
        </button>
        <h2 class="screen-title">🧋 Choose Your Category</h2>
        
        <div class="boba-categories">
          <button class="boba-category" data-category="boba-drinks">
            <h3>🧋 Boba Drinks</h3>
            <p>Milk Tea, Green Tea Refreshers, Frappes</p>
          </button>
          <button class="boba-category" data-category="smoothies">
            <h3>🍓 Smoothies</h3>
            <p>Natural fruit smoothies</p>
          </button>
        </div>
      </div>

      <!-- Boba Drinks Flavors Screen -->
      <div class="screen" id="bobaDrinksScreen">
        <button class="back-btn" onclick="menuSystem.goToScreen('boba')">
          <i class="fas fa-arrow-left"></i>
          Back to Categories
        </button>
        <h2 class="screen-title">🧋 Choose Your Boba Flavor</h2>
        
        <div style="margin-bottom: 2rem;">
          <h3 style="color: #00B0B9; margin-bottom: 1rem;">🍃 Green Tea Refreshers (₡2.000)</h3>
          <div class="boba-flavor-grid">
            <div class="boba-flavor" data-flavor="strawberry-lemonade" data-price="2000" data-type="Green Tea Refresher">Strawberry Lemonade</div>
            <div class="boba-flavor" data-flavor="passionfruit" data-price="2000" data-type="Green Tea Refresher">Passionfruit</div>
            <div class="boba-flavor" data-flavor="lemonade" data-price="2000" data-type="Green Tea Refresher">Lemonade</div>
            <div class="boba-flavor" data-flavor="strawberry-orange" data-price="2000" data-type="Green Tea Refresher">Strawberry Orange</div>
            <div class="boba-flavor" data-flavor="raspberry" data-price="2000" data-type="Green Tea Refresher">Raspberry</div>
          </div>
        </div>

        <div style="margin-bottom: 2rem;">
          <h3 style="color: #00B0B9; margin-bottom: 1rem;">🥛 Milk Tea (₡2.500)</h3>
          <div class="boba-flavor-grid">
            <div class="boba-flavor" data-flavor="original-black" data-price="2500" data-type="Milk Tea">Original Black Tea</div>
            <div class="boba-flavor" data-flavor="vanilla" data-price="2500" data-type="Milk Tea">Vanilla</div>
            <div class="boba-flavor" data-flavor="caramel" data-price="2500" data-type="Milk Tea">Caramel</div>
            <div class="boba-flavor" data-flavor="matcha" data-price="2500" data-type="Milk Tea">Matcha</div>
            <div class="boba-flavor" data-flavor="taro" data-price="2500" data-type="Milk Tea">Taro</div>
            <div class="boba-flavor" data-flavor="oolong" data-price="2500" data-type="Milk Tea">Oolong</div>
            <div class="boba-flavor" data-flavor="thai-tea" data-price="2500" data-type="Milk Tea">Thai Tea</div>
            <div class="boba-flavor" data-flavor="jasmine-green" data-price="2500" data-type="Milk Tea">Jasmine Green Tea</div>
          </div>
        </div>

        <div style="margin-bottom: 2rem;">
          <h3 style="color: #00B0B9; margin-bottom: 1rem;">🥤 Frappes in Milk (₡2.800)</h3>
          <div class="boba-flavor-grid">
            <div class="boba-flavor" data-flavor="matcha-frappe" data-price="2800" data-type="Frappe">Matcha</div>
            <div class="boba-flavor" data-flavor="taro-frappe" data-price="2800" data-type="Frappe">Taro</div>
            <div class="boba-flavor" data-flavor="thai-tea-frappe" data-price="2800" data-type="Frappe">Thai Tea</div>
            <div class="boba-flavor" data-flavor="mocha-frappe" data-price="2800" data-type="Frappe">Mocha</div>
            <div class="boba-flavor" data-flavor="chocolate-frappe" data-price="2800" data-type="Frappe">Chocolate</div>
          </div>
        </div>

        <button class="next-btn" id="bobaDrinksNextBtn" disabled onclick="menuSystem.goToScreen('bobaExtras')">
          Next: Add Extras
          <i class="fas fa-arrow-right"></i>
        </button>
      </div>

      <!-- Smoothies Flavors Screen -->
      <div class="screen" id="smoothiesScreen">
        <button class="back-btn" onclick="menuSystem.goToScreen('boba')">
          <i class="fas fa-arrow-left"></i>
          Back to Categories
        </button>
        <h2 class="screen-title">🍓 Choose Your Smoothie Flavor</h2>
        
        <div style="margin-bottom: 2rem;">
          <h3 style="color: #00B0B9; margin-bottom: 1rem;">🍓 Natural Smoothies (₡2.300)</h3>
          <div class="boba-flavor-grid">
            <div class="boba-flavor" data-flavor="mango" data-price="2300" data-type="Natural Smoothie">Mango</div>
            <div class="boba-flavor" data-flavor="strawberry" data-price="2300" data-type="Natural Smoothie">Strawberry</div>
            <div class="boba-flavor" data-flavor="banana-cacao" data-price="2300" data-type="Natural Smoothie">Banana Cacao</div>
            <div class="boba-flavor" data-flavor="blueberry-banana" data-price="2300" data-type="Natural Smoothie">Blueberry Banana</div>
            <div class="boba-flavor" data-flavor="strawberry-banana" data-price="2300" data-type="Natural Smoothie">Strawberry Banana</div>
          </div>
        </div>

        <button class="next-btn" id="smoothieNextBtn" disabled onclick="menuSystem.goToScreen('bobaExtras')">
          Next: Add Extras
          <i class="fas fa-arrow-right"></i>
        </button>
      </div>

      <!-- Boba Extras Screen -->
      <div class="screen" id="bobaExtrasScreen">
        <button class="back-btn" onclick="menuSystem.goToPreviousScreen()">
          <i class="fas fa-arrow-left"></i>
          Back to Flavors
        </button>
        <h2 class="screen-title">✨ Add Boba Extras</h2>
        
        <div class="extras-grid">
          <div class="extra-option none" data-extra="none" data-price="0">
            <i class="fas fa-times"></i>
            <div class="extra-info">
              <div class="extra-name">None</div>
              <div style="font-size: 0.85rem; color: #666;">No extras</div>
            </div>
          </div>
          <div class="extra-option" data-extra="tapioca" data-price="300">
            <i class="fas fa-circle"></i>
            <div class="extra-info">
              <div class="extra-name">Tapioca Pearls</div>
              <div class="extra-price">+₡300</div>
            </div>
          </div>
          <div class="extra-option" data-extra="popping-pearls" data-price="500">
            <i class="fas fa-star"></i>
            <div class="extra-info">
              <div class="extra-name">Popping Pearls</div>
              <div class="extra-price">+₡500</div>
            </div>
          </div>
          <div class="extra-option" data-extra="vegan-milk" data-price="300">
            <i class="fas fa-leaf"></i>
            <div class="extra-info">
              <div class="extra-name">Vegan Coconut Milk</div>
              <div class="extra-price">+₡300</div>
            </div>
          </div>
        </div>

        <button class="next-btn" onclick="menuSystem.finishOrder()">
          Finish Order
          <i class="fas fa-check"></i>
        </button>
      </div>

      <!-- Others Screen -->
      <div class="screen" id="othersScreen">
        <button class="back-btn" onclick="menuSystem.goToScreen('main')">
          <i class="fas fa-arrow-left"></i>
          Back to Menu
        </button>
        <h2 class="screen-title">☕ Others</h2>
        
        <div class="boba-categories">
          <button class="boba-category" data-category="coffee">
            <h3>☕ Coffee</h3>
          </button>
          <button class="boba-category" data-category="waffles">
            <h3>🧇 Waffles</h3>
          </button>
        </div>
      </div>

      <!-- Coffee Screen -->
      <div class="screen" id="coffeeScreen">
        <button class="back-btn" onclick="menuSystem.goToScreen('others')">
          <i class="fas fa-arrow-left"></i>
          Back to Others
        </button>
        <h2 class="screen-title">☕ Choose Your Coffee</h2>
        
        <div class="boba-flavor-grid">
          <div class="boba-flavor" data-flavor="brown-sugar-latte" data-price="2500" data-type="Coffee">Brown Sugar Latte</div>
          <div class="boba-flavor" data-flavor="vietnamese-coffee" data-price="2300" data-type="Coffee">Vietnamese Coffee</div>
        </div>

        <button class="next-btn" id="coffeeNextBtn" disabled onclick="menuSystem.finishOrder()">
          Finish Order
          <i class="fas fa-check"></i>
        </button>
      </div>

      <!-- Waffles Screen -->
      <div class="screen" id="wafflesScreen">
        <button class="back-btn" onclick="menuSystem.goToScreen('others')">
          <i class="fas fa-arrow-left"></i>
          Back to Others
        </button>
        <h2 class="screen-title">🧇 Choose Your Waffle</h2>
        
        <div class="boba-flavor-grid">
          <div class="boba-flavor" data-flavor="bubble-waffle" data-price="2000" data-type="Bubble Waffle">Bubble Waffle</div>
        </div>

        <button class="next-btn" id="waffleNextBtn" disabled onclick="menuSystem.goToScreen('waffleExtras')">
          Next: Add Extras
          <i class="fas fa-arrow-right"></i>
        </button>
      </div>

      <!-- Waffle Extras Screen -->
      <div class="screen" id="waffleExtrasScreen">
        <button class="back-btn" onclick="menuSystem.goToScreen('waffles')">
          <i class="fas fa-arrow-left"></i>
          Back to Waffles
        </button>
        <h2 class="screen-title">✨ Add Waffle Extras</h2>
        
        <div class="extras-grid">
          <div class="extra-option none" data-extra="none" data-price="0">
            <i class="fas fa-times"></i>
            <div class="extra-info">
              <div class="extra-name">None</div>
              <div style="font-size: 0.85rem; color: #666;">No extras</div>
            </div>
          </div>
          <div class="extra-option" data-extra="ice-cream" data-price="500">
            <i class="fas fa-ice-cream"></i>
            <div class="extra-info">
              <div class="extra-name">Add Ice Cream</div>
              <div class="extra-price">+₡500</div>
            </div>
          </div>
          <div class="extra-option" data-extra="strawberries" data-price="200">
            <i class="fas fa-strawberry"></i>
            <div class="extra-info">
              <div class="extra-name">Add Strawberries</div>
              <div class="extra-price">+₡200</div>
            </div>
          </div>
        </div>

        <button class="next-btn" onclick="menuSystem.finishOrder()">
          Finish Order
          <i class="fas fa-check"></i>
        </button>
      </div>
    </div>
  </div>

  <!-- Order Summary -->
  <div class="order-summary" id="orderSummary">
    <div class="order-summary-content">
      <div class="order-details">
        <div class="order-item" id="orderItem">No item selected</div>
        <div class="order-flavor" id="orderFlavor"></div>
        <div class="order-extras" id="orderExtras"></div>
      </div>
      <div class="order-price" id="orderPrice">₡0</div>
      <div class="order-actions">
        <button class="clear-btn" id="clearOrder">Clear</button>
        <button class="order-btn" id="placeOrder">Order Now</button>
      </div>
    </div>
  </div>

  <script>
    // Menu System
    class MenuSystem {
      constructor() {
        this.currentOrder = {
          category: null,
          subcategory: null,
          flavor: null,
          type: null,
          price: 0,
          extras: []
        };
        this.currentScreen = 'main';
        this.previousScreen = null;
        this.init();
      }

      init() {
        this.setupEventListeners();
      }

      setupEventListeners() {
        // Main category buttons
        document.querySelectorAll('[data-category]').forEach(btn => {
          btn.addEventListener('click', (e) => {
            const category = e.currentTarget.dataset.category;
            this.selectCategory(category);
          });
        });

        // Ice cream flavors
        document.querySelectorAll('#icecreamScreen .flavor-option').forEach(option => {
          option.addEventListener('click', (e) => {
            this.selectIceCreamFlavor(e.currentTarget);
          });
        });

        // Boba flavors
        document.querySelectorAll('.boba-flavor').forEach(flavor => {
          flavor.addEventListener('click', (e) => {
            this.selectBobaFlavor(e.currentTarget);
          });
        });

        // Extras
        document.querySelectorAll('.extra-option').forEach(extra => {
          extra.addEventListener('click', (e) => {
            this.selectExtra(e.currentTarget);
          });
        });

        // Order actions
        document.getElementById('clearOrder').addEventListener('click', () => {
          this.clearOrder();
        });

        document.getElementById('placeOrder').addEventListener('click', () => {
          this.placeOrder();
        });
      }

      goToScreen(screenName) {
        this.previousScreen = this.currentScreen;
        this.currentScreen = screenName;
        
        // Hide all screens
        document.querySelectorAll('.screen').forEach(screen => {
          screen.classList.remove('active');
        });

        // Show target screen
        const targetScreen = document.getElementById(screenName + 'Screen');
        if (targetScreen) {
          targetScreen.classList.add('active');
        }
      }

      goToPreviousScreen() {
        // Handle specific back navigation for extras screens
        if (this.currentScreen === 'bobaExtras') {
          if (this.currentOrder.subcategory === 'boba-drinks') {
            this.goToScreen('bobaDrinks');
          } else if (this.currentOrder.subcategory === 'smoothies') {
            this.goToScreen('smoothies');
          }
        } else if (this.currentScreen === 'waffleExtras') {
          this.goToScreen('waffles');
        } else if (this.previousScreen) {
          this.goToScreen(this.previousScreen);
        }
      }

      selectCategory(category) {
        this.currentOrder.category = category;
        
        switch(category) {
          case 'icecream':
            this.goToScreen('icecream');
            break;
          case 'boba':
            this.goToScreen('boba');
            break;
          case 'others':
            this.goToScreen('others');
            break;
          case 'boba-drinks':
            this.currentOrder.subcategory = 'boba-drinks';
            this.goToScreen('bobaDrinks');
            break;
          case 'smoothies':
            this.currentOrder.subcategory = 'smoothies';
            this.goToScreen('smoothies');
            break;
          case 'coffee':
            this.currentOrder.subcategory = 'coffee';
            this.goToScreen('coffee');
            break;
          case 'waffles':
            this.currentOrder.subcategory = 'waffles';
            this.goToScreen('waffles');
            break;
        }
      }

      selectIceCreamFlavor(flavorElement) {
        // Remove previous selections
        document.querySelectorAll('#icecreamScreen .flavor-option').forEach(opt => {
          opt.classList.remove('selected');
        });

        // Select current flavor
        flavorElement.classList.add('selected');
        
        const flavor = flavorElement.dataset.flavor;
        this.currentOrder.flavor = flavor;
        this.currentOrder.type = 'Ice Cream';
        this.currentOrder.price = 2000; // Base price for ice cream

        // Enable next button
        document.getElementById('icecreamNextBtn').disabled = false;

        this.updateOrderSummary();
      }

      selectBobaFlavor(flavorElement) {
        // Get current screen to determine which flavors to clear
        const currentScreen = document.querySelector('.screen.active');
        
        // Remove previous selections in current screen only
        currentScreen.querySelectorAll('.boba-flavor').forEach(opt => {
          opt.classList.remove('selected');
        });

        // Select current flavor
        flavorElement.classList.add('selected');

        const flavor = flavorElement.dataset.flavor;
        const price = parseInt(flavorElement.dataset.price);
        const type = flavorElement.dataset.type;

        this.currentOrder.flavor = flavor;
        this.currentOrder.type = type;
        this.currentOrder.price = price;

        // Enable appropriate next button based on current screen
        if (currentScreen.id === 'bobaDrinksScreen') {
          document.getElementById('bobaDrinksNextBtn').disabled = false;
        } else if (currentScreen.id === 'smoothiesScreen') {
          document.getElementById('smoothieNextBtn').disabled = false;
        } else if (currentScreen.id === 'coffeeScreen') {
          document.getElementById('coffeeNextBtn').disabled = false;
        } else if (currentScreen.id === 'wafflesScreen') {
          document.getElementById('waffleNextBtn').disabled = false;
        }

        this.updateOrderSummary();
      }

      selectExtra(extraElement) {
        const extraName = extraElement.dataset.extra;
        const extraPrice = parseInt(extraElement.dataset.price);

        if (extraName === 'none') {
          // Clear all extras and select none
          document.querySelectorAll('.extra-option').forEach(opt => {
            opt.classList.remove('selected');
          });
          extraElement.classList.add('selected');
          this.currentOrder.extras = [];
        } else {
          // Toggle extra selection
          const isSelected = extraElement.classList.contains('selected');
          
          if (isSelected) {
            // Deselect
            extraElement.classList.remove('selected');
            this.currentOrder.extras = this.currentOrder.extras.filter(extra => extra.name !== extraName);
          } else {
            // Select
            extraElement.classList.add('selected');
            
            // Remove "none" if selected
            document.querySelector('.extra-option.none').classList.remove('selected');
            
            // Add extra if not already present
            if (!this.currentOrder.extras.find(extra => extra.name === extraName)) {
              this.currentOrder.extras.push({
                name: extraName,
                displayName: extraElement.querySelector('.extra-name').textContent,
                price: extraPrice
              });
            }
          }
        }

        this.updateOrderSummary();
      }

      updateOrderSummary() {
        const orderSummary = document.getElementById('orderSummary');
        const orderItem = document.getElementById('orderItem');
        const orderFlavor = document.getElementById('orderFlavor');
        const orderExtras = document.getElementById('orderExtras');
        const orderPrice = document.getElementById('orderPrice');

        if (!this.currentOrder.type && !this.currentOrder.flavor) {
          orderSummary.classList.remove('show');
          return;
        }

        // Update display
        if (this.currentOrder.type) {
          orderItem.textContent = this.currentOrder.type;
        }

        if (this.currentOrder.flavor) {
          orderFlavor.textContent = `Flavor: ${this.currentOrder.flavor.replace('-', ' ').replace(/\b\w/g, l => l.toUpperCase())}`;
          orderFlavor.style.display = 'block';
        } else {
          orderFlavor.style.display = 'none';
        }

        // Update extras display
        if (this.currentOrder.extras.length > 0) {
          const extrasText = this.currentOrder.extras.map(extra => extra.displayName).join(', ');
          orderExtras.textContent = `Extras: ${extrasText}`;
          orderExtras.style.display = 'block';
        } else {
          orderExtras.style.display = 'none';
        }

        // Calculate total price
        let totalPrice = this.currentOrder.price;
        totalPrice += this.currentOrder.extras.reduce((sum, extra) => sum + extra.price, 0);

        orderPrice.textContent = `₡${totalPrice.toLocaleString()}`;
        orderSummary.classList.add('show');
      }

      finishOrder() {
        alert('🎉 Almost ready!\n\nYour order is being prepared. Please visit one of our locations to complete your purchase!\n\n📍 Puerto Viejo\n📍 Cocles');
        this.clearOrder();
      }

      clearOrder() {
        this.currentOrder = {
          category: null,
          subcategory: null,
          flavor: null,
          type: null,
          price: 0,
          extras: []
        };

        // Remove all selections
        document.querySelectorAll('.flavor-option, .boba-flavor, .extra-option').forEach(opt => {
          opt.classList.remove('selected');
        });

        // Disable next buttons
        document.getElementById('icecreamNextBtn').disabled = true;
        const bobaDrinksBtn = document.getElementById('bobaDrinksNextBtn');
        const smoothieBtn = document.getElementById('smoothieNextBtn');
        const coffeeBtn = document.getElementById('coffeeNextBtn');
        const waffleBtn = document.getElementById('waffleNextBtn');
        
        if (bobaDrinksBtn) bobaDrinksBtn.disabled = true;
        if (smoothieBtn) smoothieBtn.disabled = true;
        if (coffeeBtn) coffeeBtn.disabled = true;
        if (waffleBtn) waffleBtn.disabled = true;

        // Hide order summary
        document.getElementById('orderSummary').classList.remove('show');

        // Go back to main screen
        this.goToScreen('main');
      }

      placeOrder() {
        if (!this.currentOrder.type) {
          alert('Please select an item first!');
          return;
        }

        let orderText = `🛍️ Your Order:\n\n`;
        orderText += `${this.currentOrder.type}`;
        
        if (this.currentOrder.flavor) {
          orderText += `\nFlavor: ${this.currentOrder.flavor.replace('-', ' ').replace(/\b\w/g, l => l.toUpperCase())}`;
        }
        
        if (this.currentOrder.extras.length > 0) {
          orderText += `\nExtras: ${this.currentOrder.extras.map(e => e.displayName).join(', ')}`;
        }
        
        let totalPrice = this.currentOrder.price + this.currentOrder.extras.reduce((sum, extra) => sum + extra.price, 0);
        orderText += `\nTotal: ₡${totalPrice.toLocaleString()}`;
        orderText += `\n\n📍 Visit us at:\n• Puerto Viejo\n• Cocles\n\nThank you for choosing Hola Boba! 🧋`;

        alert(orderText);
        this.clearOrder();
      }
    }

    // Initialize menu system
    let menuSystem;

    document.addEventListener('DOMContentLoaded', function() {
      // Initialize menu system
      menuSystem = new MenuSystem();

      // Initialize detection system and order modal functionality
      const detection = new AccessDetection();

      // Order modal functionality
      const orderModal = document.getElementById('orderModal');
      const closeModal = document.getElementById('closeModal');
      const pickupOption = document.getElementById('pickupOption');
      const deliveryOption = document.getElementById('deliveryOption');

      // Close modal handlers
      closeModal.addEventListener('click', () => {
        orderModal.classList.remove('show');
      });

      orderModal.addEventListener('click', (e) => {
        if (e.target === orderModal) {
          orderModal.classList.remove('show');
        }
      });

      // Order option handlers
      pickupOption.addEventListener('click', () => {
        console.log('🏪 Pickup order selected');
        alert('🏪 Great! Visit us at one of our locations:\n\n📍 Puerto Viejo\n📍 Cocles\n\nCheck our locations section below for directions!');
        orderModal.classList.remove('show');
      });

      deliveryOption.addEventListener('click', () => {
        console.log('🚚 Delivery order selected');
        alert('🚚 Delivery coming soon!\n\nFor now, please visit us at one of our locations for pickup. We\'re working on delivery options!');
        orderModal.classList.remove('show');
      });

      // Close modal with Escape key
      document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape' && orderModal.classList.contains('show')) {
          orderModal.classList.remove('show');
        }
      });

      // Slideshow functionality
      const slideshow = document.querySelector('.slideshow-container');
      const slides = document.querySelectorAll('.slide');
      const dotsContainer = document.querySelector('.pagination-dots');
      const prevButton = document.querySelector('.prev-button');
      const nextButton = document.querySelector('.next-button');
      
      if (slideshow && slides.length > 0) {
        let currentSlide = 0;
        let startX = 0;
        let currentX = 0;
        let isDragging = false;

        // Create pagination dots
        slides.forEach((_, index) => {
          const dot = document.createElement('div');
          dot.classList.add('dot');
          if (index === 0) dot.classList.add('active');
          dot.addEventListener('click', () => goToSlide(index));
          dotsContainer.appendChild(dot);
        });

        function updateDots() {
          document.querySelectorAll('.dot').forEach((dot, index) => {
            dot.classList.toggle('active', index === currentSlide);
          });
        }

        function goToSlide(index) {
          currentSlide = index;
          slideshow.style.transform = `translateX(-${currentSlide * 100}%)`;
          updateDots();
        }

        function nextSlide() {
          currentSlide = (currentSlide + 1) % slides.length;
          goToSlide(currentSlide);
        }

        function prevSlide() {
          currentSlide = (currentSlide - 1 + slides.length) % slides.length;
          goToSlide(currentSlide);
        }

        // Touch and mouse events
        slideshow.addEventListener('mousedown', startDragging);
        slideshow.addEventListener('touchstart', startDragging);
        window.addEventListener('mousemove', drag);
        window.addEventListener('touchmove', drag);
        window.addEventListener('mouseup', stopDragging);
        window.addEventListener('touchend', stopDragging);

        function startDragging(e) {
          isDragging = true;
          startX = e.type === 'mousedown' ? e.pageX : e.touches[0].pageX;
          currentX = -currentSlide * 100;
        }

        function drag(e) {
          if (!isDragging) return;
          e.preventDefault();
          const x = e.type === 'mousemove' ? e.pageX : e.touches[0].pageX;
          const walk = (x - startX) / slideshow.offsetWidth * 100;
          slideshow.style.transform = `translateX(${currentX + walk}%)`;
        }

        function stopDragging(e) {
          if (!isDragging) return;
          isDragging = false;
          const x = e.type === 'mouseup' ? e.pageX : e.changedTouches[0].pageX;
          const walk = (x - startX) / slideshow.offsetWidth * 100;
          
          if (Math.abs(walk) > 20) {
            if (walk > 0) prevSlide();
            else nextSlide();
          } else {
            goToSlide(currentSlide);
          }
        }

        // Button controls
        if (prevButton) prevButton.addEventListener('click', prevSlide);
        if (nextButton) nextButton.addEventListener('click', nextSlide);

        // Auto-advance slides
        setInterval(nextSlide, 5000);
      }
    });
  </script>
</body>
</html>
